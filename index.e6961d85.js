const e=()=>{let e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t};let t=!1;const n=e=>{e.forEach(e=>{e.style.display="none",e.classList.add("animated","fadeIn")})},l=e=>(e.forEach(e=>{if("none"!==getComputedStyle(e).display)return!0}),!1),o=e=>{window.addEventListener("scroll",()=>{!t&&window.scrollY+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&document.querySelector(e).click()})};function s(l,o,s,d=!0,i=!1){let a=document.querySelectorAll(l),c=document.querySelector(o),r=document.querySelector(s),u=document.querySelectorAll("[data-modal]"),p=e();a.forEach(e=>{e.addEventListener("click",l=>{l.target&&l.preventDefault(),t=!0,i&&e.remove(),n(u),c.style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=`${p}px`})}),r.addEventListener("click",()=>{n(u),c.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px"}),c.addEventListener("click",e=>{e.target===c&&d&&(n(u),c.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px")})}const d=()=>{s(".button-order.button-design",".popup-design",".popup-design .popup-close"),s(".button-order.button-consultation",".popup-consultation",".popup-consultation .popup-close"),s(".fixed-gift",".popup-gift",".popup-gift .popup-close",!0,!0),o(".fixed-gift"),setTimeout(()=>{let t=document.querySelectorAll("[data-modal]");if(!l(t)){let t=e();document.querySelector(".popup-consultation").style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=`${t}px`}},6e4)},i=(e,t=1,n,l,o)=>{let s=!1,d=document.querySelectorAll(e);try{let e=document.querySelector(l),n=document.querySelector(o);e.addEventListener("click",()=>{a(-1),d[t-1].classList.remove("slideInLeft"),d[t-1].classList.add("slideInRight")}),n.addEventListener("click",()=>{a(1),d[t-1].classList.remove("slideInRight"),d[t-1].classList.add("slideInLeft")})}catch(e){}let i=e=>{d.length<e&&(t=1),e<1&&(t=d.length),d.forEach(e=>{e.classList.add("animated"),e.style.display="none"}),d[t-1].style.display="block"},a=e=>{i(t+=e)},c=()=>{s="vertical"===n?setInterval(()=>{a(1),d[t-1].classList.add("slideInDown")},3e3):setInterval(()=>{a(1),d[t-1].classList.remove("slideInRight"),d[t-1].classList.add("slideInLeft")},3e3)};d[0].parentNode.addEventListener("mouseenter",()=>{clearInterval(s)}),d[0].parentNode.addEventListener("mouseleave",()=>{c()}),i(t),c()},a={designer:"https://jsonplaceholder.typicode.com/posts",quester:"https://dummyjson.com/products/add"},c={loading:"Загрузка...",success:"Спасибо! Скоро мы с вами свяжемся.",failure:"Что-то пошло не так.",spinner:"spinner.gif",ok:"ok.png",fail:"fail.png"},r=async(e,t)=>{let n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:t});return await n.json()},u=(e,t)=>{e.forEach(e=>{e.value=""}),t.forEach(e=>{e.previousElementSibling.textContent="Файл не выбран"})},p=()=>{let e;let t=document.querySelectorAll("form"),n=document.querySelectorAll("input"),l=document.querySelectorAll("[name='upload']");l.forEach(t=>{t.addEventListener("input",()=>{let n;e=t.files[0].name;let l=t.files[0].name.split(".")[0],o=t.files[0].name.split(".")[1];n=l.length>7?"...":".";let s=l.substring(0,7)+n+o;t.previousElementSibling.textContent=s})}),t.forEach(t=>{t.addEventListener("submit",o=>{let s;o.preventDefault();let d=document.createElement("div");d.classList.add("status"),t.parentNode.appendChild(d),t.classList.add("animated","fadeOutUp"),setTimeout(()=>{t.style.display="none"},400);let i=document.createElement("img");i.setAttribute("src",c.spinner),i.classList.add("animated","fadeInUp"),d.appendChild(i);let p=document.createElement("div");p.textContent=c.loading,d.appendChild(p);let m=new FormData(t);s=t.closest(".popup-design")||t.classList.contains("form_calc")?a.designer:a.quester,m.append("api",s),m.append("fileFullName",e);let y=JSON.stringify(Object.fromEntries(m));r(s,y).then(e=>{i.setAttribute("src",c.ok),i.setAttribute("alt","test image"),p.textContent=c.success,console.log(e)}).catch(()=>{i.setAttribute("src",c.fail),p.textContent=c.failure}).finally(()=>{u(n,l),setTimeout(()=>{d.remove(),t.style.display="block",t.classList.remove("fadeOutUp"),t.classList.add("fadeInUp")},5e3)})})})};window.addEventListener("DOMContentLoaded",function(){"use strict";d(),i(".main-slider-item",1,"vertical"),i(".feedback-slider-item",1,"horizontal",".main-prev-btn",".main-next-btn"),p()});
//# sourceMappingURL=index.e6961d85.js.map
