const e=()=>{let e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t};let t=!1;const l=e=>{e.forEach(e=>{e.style.display="none",e.classList.add("animated","fadeIn")})},n=e=>(e.forEach(e=>{if("none"!==getComputedStyle(e).display)return!0}),!1),s=e=>{window.addEventListener("scroll",()=>{!t&&window.scrollY+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&document.querySelector(e).click()})};function o(n,s,o,a=!0,i=!1){let d=document.querySelectorAll(n),c=document.querySelector(s),r=document.querySelector(o),u=document.querySelectorAll("[data-modal]"),p=e();d.forEach(e=>{e.addEventListener("click",n=>{n.target&&n.preventDefault(),t=!0,i&&e.remove(),l(u),c.style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=`${p}px`})}),r.addEventListener("click",()=>{l(u),c.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px"}),c.addEventListener("click",e=>{e.target===c&&a&&(l(u),c.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px")})}const a=()=>{o(".button-order.button-design",".popup-design",".popup-design .popup-close"),o(".button-order.button-consultation",".popup-consultation",".popup-consultation .popup-close"),o(".fixed-gift",".popup-gift",".popup-gift .popup-close",!0,!0),s(".fixed-gift"),setTimeout(()=>{let t=document.querySelectorAll("[data-modal]");if(!n(t)){let t=e();document.querySelector(".popup-consultation").style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=`${t}px`}},6e4)},i=(e,t=1,l,n,s)=>{let o=!1,a=document.querySelectorAll(e);try{let e=document.querySelector(n),l=document.querySelector(s);e.addEventListener("click",()=>{d(-1),a[t-1].classList.remove("slideInLeft"),a[t-1].classList.add("slideInRight")}),l.addEventListener("click",()=>{d(1),a[t-1].classList.remove("slideInRight"),a[t-1].classList.add("slideInLeft")})}catch(e){}let i=e=>{a.length<e&&(t=1),e<1&&(t=a.length),a.forEach(e=>{e.classList.add("animated"),e.style.display="none"}),a[t-1].style.display="block"},d=e=>{i(t+=e)},c=()=>{o="vertical"===l?setInterval(()=>{d(1),a[t-1].classList.add("slideInDown")},3e3):setInterval(()=>{d(1),a[t-1].classList.remove("slideInRight"),a[t-1].classList.add("slideInLeft")},3e3)};a[0].parentNode.addEventListener("mouseenter",()=>{clearInterval(o)}),a[0].parentNode.addEventListener("mouseleave",()=>{c()}),i(t),c()},d=async(e,t)=>{let l=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:t});return await l.json()},c=async e=>{let t=await fetch(e);if(!t.ok){let l=`Could not fetch ${e}, status: ${t.status}`;throw Error(l)}return await t.json()},r={designer:"https://jsonplaceholder.typicode.com/posts",quester:"https://dummyjson.com/products/add"},u={loading:"Загрузка...",success:"Спасибо! Скоро мы с вами свяжемся.",failure:"Что-то пошло не так.",spinner:"spinner.gif",ok:"ok.png",fail:"fail.png"},p=(e,t)=>{e.forEach(e=>{e.value=""}),t.forEach(e=>{e.previousElementSibling.textContent="Файл не выбран"})},m=()=>{let e;let t=document.querySelectorAll("form"),l=document.querySelectorAll("input"),n=document.querySelectorAll("[name='upload']");n.forEach(t=>{t.addEventListener("input",()=>{let l;e=t.files[0].name;let n=t.files[0].name.split(".")[0],s=t.files[0].name.split(".")[1];l=n.length>7?"...":".";let o=n.substring(0,7)+l+s;t.previousElementSibling.textContent=o})}),t.forEach(t=>{t.addEventListener("submit",s=>{let o;s.preventDefault();let a=document.createElement("div");a.classList.add("status"),t.parentNode.appendChild(a),t.classList.add("animated","fadeOutUp"),setTimeout(()=>{t.style.display="none"},400);let i=document.createElement("img");i.setAttribute("src",u.spinner),i.classList.add("animated","fadeInUp"),a.appendChild(i);let c=document.createElement("div");c.textContent=u.loading,a.appendChild(c);let m=new FormData(t);o=t.closest(".popup-design")||t.classList.contains("form_calc")?r.designer:r.quester,m.append("api",o),m.append("fileFullName",e);let y=JSON.stringify(Object.fromEntries(m));d(o,y).then(e=>{i.setAttribute("src",u.ok),i.setAttribute("alt","test image"),c.textContent=u.success,console.log(e)}).catch(()=>{i.setAttribute("src",u.fail),c.textContent=u.failure}).finally(()=>{p(l,n),setTimeout(()=>{a.remove(),t.style.display="block",t.classList.remove("fadeOutUp"),t.classList.add("fadeInUp")},5e3)})})})},y=e=>{let t="+38(0__) ___-__-__",l=t.replace(/\D/g,""),n=(e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let t=elem.createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select()}};function s(e){e.preventDefault();let s=0,o=this.value.replace(/\D/g,"");l.length>=o.length&&(o=l),this.value=t.replace(/./g,e=>/[_\d]/g.test(e)&&s<o.length?o.charAt(s++):s>=o.length?"":e),"blur"===e.type?2==this.value.length&&(this.value=""):n(this.value.length,this)}let o=document.querySelectorAll(e);o.forEach(e=>{e.addEventListener("input",s),e.addEventListener("focus",s),e.addEventListener("blur",s)})},f=(e,t)=>{let l=document.querySelector(e),n=e=>{e.forEach(({src:e,title:l,link:n})=>{let s=document.createElement("div");s.classList.add("animated","fadeInUp","col-sm-3","col-sm-offset-0","col-xs-10","col-xs-offset-1"),s.innerHTML=`
				<div class="styles-block">
					<img src=${e} alt="style ${l}">
					<h4>${l}</h4>
					<a href="${n}">Подробнее</a>
				</div>
			`,document.querySelector(t).appendChild(s)})};l.addEventListener("click",function(){c("server/db.json").then(e=>{console.log(e.styles),n(e.styles)}).catch(e=>console.log(e)),this.remove()})},h=e=>{let t=document.querySelectorAll(e);t.forEach(e=>{e.addEventListener("keypress",e=>{e.key.match(/[^а-яё 0-9]/gi)&&e.preventDefault()})})};window.addEventListener("DOMContentLoaded",function(){"use strict";a(),i(".main-slider-item",1,"vertical"),i(".feedback-slider-item",1,"horizontal",".main-prev-btn",".main-next-btn"),m(),y("[name='phone']"),h("[name='name']"),h("[name='message']"),f(".button.button-transparent.button-styles","#styles .row")});
//# sourceMappingURL=index.a03eb77a.js.map
