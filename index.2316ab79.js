const e=()=>{let e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t};let t=!1;const l=e=>{e.forEach(e=>{e.style.display="none",e.classList.add("animated","fadeIn")})},n=e=>(e.forEach(e=>{if("none"!==getComputedStyle(e).display)return!0}),!1),o=e=>{window.addEventListener("scroll",()=>{!t&&window.scrollY+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&document.querySelector(e).click()})};function s(n,o,s,a=!0,r=!1){let i=document.querySelectorAll(n),c=document.querySelector(o),d=document.querySelector(s),u=document.querySelectorAll("[data-modal]"),m=e();i.forEach(e=>{e.addEventListener("click",n=>{n.target&&n.preventDefault(),t=!0,r&&e.remove(),l(u),c.style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=`${m}px`})}),d.addEventListener("click",()=>{l(u),c.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px"}),c.addEventListener("click",e=>{e.target===c&&a&&(l(u),c.style.display="none",document.body.style.overflow="",document.body.style.marginRight="0px")})}const a=()=>{s(".button-order.button-design",".popup-design",".popup-design .popup-close"),s(".button-order.button-consultation",".popup-consultation",".popup-consultation .popup-close"),s(".fixed-gift",".popup-gift",".popup-gift .popup-close",!0,!0),o(".fixed-gift"),setTimeout(()=>{let t=document.querySelectorAll("[data-modal]");if(!n(t)){let t=e();document.querySelector(".popup-consultation").style.display="block",document.body.style.overflow="hidden",document.body.style.marginRight=`${t}px`}},6e4)},r=(e,t=1,l,n,o)=>{let s=!1,a=document.querySelectorAll(e);try{let e=document.querySelector(n),l=document.querySelector(o);e.addEventListener("click",()=>{i(-1),a[t-1].classList.remove("slideInLeft"),a[t-1].classList.add("slideInRight")}),l.addEventListener("click",()=>{i(1),a[t-1].classList.remove("slideInRight"),a[t-1].classList.add("slideInLeft")})}catch(e){}let r=e=>{a.length<e&&(t=1),e<1&&(t=a.length),a.forEach(e=>{e.classList.add("animated"),e.style.display="none"}),a[t-1].style.display="block"},i=e=>{r(t+=e)},c=()=>{s="vertical"===l?setInterval(()=>{i(1),a[t-1].classList.add("slideInDown")},3e3):setInterval(()=>{i(1),a[t-1].classList.remove("slideInRight"),a[t-1].classList.add("slideInLeft")},3e3)};a[0].parentNode.addEventListener("mouseenter",()=>{clearInterval(s)}),a[0].parentNode.addEventListener("mouseleave",()=>{c()}),r(t),c()},i=async(e,t)=>{let l=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:t});return await l.json()},c=async e=>{let t=await fetch(e);if(!t.ok){let l=`Could not fetch ${e}, status: ${t.status}`;throw Error(l)}return await t.json()},d={designer:"https://jsonplaceholder.typicode.com/posts",quester:"https://dummyjson.com/products/add"},u={loading:"Загрузка...",success:"Спасибо! Скоро мы с вами свяжемся.",failure:"Что-то пошло не так.",spinner:"spinner.gif",ok:"ok.png",fail:"fail.png"},m=(e,t)=>{e.forEach(e=>{e.value=""}),t.forEach(e=>{e.previousElementSibling.textContent="Файл не выбран"})},p=()=>{let e;let t=document.querySelectorAll("form"),l=document.querySelectorAll("input"),n=document.querySelectorAll("[name='upload']");n.forEach(t=>{t.addEventListener("input",()=>{let l;e=t.files[0].name;let n=t.files[0].name.split(".")[0],o=t.files[0].name.split(".")[1];l=n.length>7?"...":".";let s=n.substring(0,7)+l+o;t.previousElementSibling.textContent=s})}),t.forEach(t=>{t.addEventListener("submit",o=>{let s;o.preventDefault();let a=o.target,r=0;if(a.classList.contains("form_calc")){let e=a.querySelector(".calc-price");r=e.textContent}let c=document.createElement("div");c.classList.add("status"),t.parentNode.appendChild(c),t.classList.add("animated","fadeOutUp"),setTimeout(()=>{t.style.display="none"},400);let p=document.createElement("img");p.setAttribute("src",u.spinner),p.classList.add("animated","fadeInUp"),c.appendChild(p);let y=document.createElement("div");y.textContent=u.loading,c.appendChild(y);let f=new FormData(t);s=t.closest(".popup-design")||t.classList.contains("form_calc")?d.designer:d.quester,f.append("api",s),f.append("fileFullName",e),r>0&&f.append("sum",r);let h=JSON.stringify(Object.fromEntries(f));i(s,h).then(e=>{p.setAttribute("src",u.ok),p.setAttribute("alt","test image"),y.textContent=u.success}).catch(()=>{p.setAttribute("src",u.fail),y.textContent=u.failure}).finally(()=>{m(l,n),setTimeout(()=>{c.remove(),t.style.display="block",t.classList.remove("fadeOutUp"),t.classList.add("fadeInUp")},5e3)})})})},y=e=>{let t="+38(0__) ___-__-__",l=t.replace(/\D/g,""),n=(e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let t=elem.createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select()}};function o(e){e.preventDefault();let o=0,s=this.value.replace(/\D/g,"");l.length>=s.length&&(s=l),this.value=t.replace(/./g,e=>/[_\d]/g.test(e)&&o<s.length?s.charAt(o++):o>=s.length?"":e),"blur"===e.type?2==this.value.length&&(this.value=""):n(this.value.length,this)}let s=document.querySelectorAll(e);s.forEach(e=>{e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)})},f=(e,t)=>{let l=document.querySelector(e),n=e=>{e.forEach(({src:e,title:l,link:n})=>{let o=document.createElement("div");o.classList.add("animated","fadeInUp","col-sm-3","col-sm-offset-0","col-xs-10","col-xs-offset-1"),o.innerHTML=`
				<div class="styles-block">
					<img src=${e} alt="style ${l}">
					<h4>${l}</h4>
					<a href="${n}">Подробнее</a>
				</div>
			`,document.querySelector(t).appendChild(o)})};l.addEventListener("click",function(){c("server/db.json").then(e=>{n(e.styles)}).catch(e=>console.log(e)),this.remove()})},h=(e,t,l,n,o,s,a,r)=>{let i,c,d,u;let m=document.querySelector(e),p=document.querySelector(t),y=document.querySelector(l),f=document.querySelector(n),h=document.querySelector(o),v=e=>{d=Math.round((i=(u=s.find(e=>e[m.value]))?u[m.value]:0)*(c=(u=a.find(e=>e[p.value]))?u[p.value]:0)+((u=r.find(e=>e[y.value]))?u[y.value]:0)),0===i||0===c?h.textContent="Выберите размер и материал картины":"IWANTPOPART"===f.value?h.textContent=Math.round(.7*d):h.textContent=d};m.addEventListener("change",v),p.addEventListener("change",v),y.addEventListener("change",v),f.addEventListener("input",v)},v=()=>{let e=document.querySelector(".portfolio-menu"),t=e.querySelectorAll("li"),l=e.querySelector(".all"),n=e.querySelector(".lovers"),o=e.querySelector(".chef"),s=e.querySelector(".girl"),a=e.querySelector(".guy"),r=e.querySelector(".grandmother"),i=e.querySelector(".granddad"),c=document.querySelector(".portfolio-wrapper"),d=c.querySelectorAll(".all"),u=c.querySelectorAll(".lovers"),m=c.querySelectorAll(".chef"),p=c.querySelectorAll(".girl"),y=c.querySelectorAll(".guy"),f=document.querySelector(".portfolio-no"),h=e=>{d.forEach(e=>{e.style.display="none",e.classList.remove("animated","fadeIn")}),f.style.display="none",f.classList.remove("animated","fadeIn"),e?e.forEach(e=>{e.style.display="block",e.classList.add("animated","fadeIn")}):(f.style.display="block",f.classList.add("animated","fadeIn"))};l.addEventListener("click",()=>{h(d)}),n.addEventListener("click",()=>{h(u)}),o.addEventListener("click",()=>{h(m)}),s.addEventListener("click",()=>{h(p)}),a.addEventListener("click",()=>{h(y)}),r.addEventListener("click",()=>{h()}),i.addEventListener("click",()=>{h()}),e.addEventListener("click",e=>{let l=e.target;l&&"LI"===l.tagName&&(t.forEach(e=>e.classList.remove("active")),l.classList.add("active"))})},g=e=>{let t=document.querySelectorAll(e),l=e=>{let t=e.querySelector("img");t.src=t.src.slice(0,-4)+"-1.png",e.querySelectorAll("p:not(.sizes-hit)").forEach(e=>e.style.display="none")},n=e=>{let t=e.querySelector("img");t.src=t.src.slice(0,-6)+".png",e.querySelectorAll("p:not(.sizes-hit)").forEach(e=>e.style.display="block")};t.forEach(e=>{e.addEventListener("mouseover",()=>{l(e)}),e.addEventListener("mouseout",()=>{n(e)})})},E=(e,t)=>{let l=document.querySelectorAll(e);l.forEach(e=>{e.addEventListener("click",function(){this.classList.toggle("active-style"),this.nextElementSibling.classList.toggle("active-content"),this.classList.contains("active-style")?this.nextElementSibling.style.maxHeight=this.nextElementSibling.scrollHeight+80+"px":this.nextElementSibling.style.maxHeight="0px"})})},L=(e,t)=>{let l=document.querySelector(e),n=document.querySelector(t);n.style.display="none",l.addEventListener("click",()=>{"none"===n.style.display&&window.screen.availWidth<993?n.style.display="block":n.style.display="none"}),window.addEventListener("resize",()=>{window.screen.availWidth>992&&(n.style.display="none")})},S=e=>{let t=document.querySelector(e);t.classList.add("animated"),window.addEventListener("scroll",()=>{document.documentElement.scrollTop>1650?(t.classList.add("fadeIn"),t.classList.remove("fadeOut")):(t.classList.add("fadeOut"),t.classList.remove("fadeIn"))});let l=document.querySelectorAll('[href^="#"]');l.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=document.documentElement.scrollTop,l=this.hash,n=document.querySelector(l).getBoundingClientRect().top,o=null,s=e=>{null===o&&(o=e);let a=e-o,r=n<0?Math.max(t-a/.3,t+n):Math.min(t+a/.3,t+n);document.documentElement.scrollTo(0,r),r!=t+n?requestAnimationFrame(s):location.hash=l};requestAnimationFrame(s)})})},b=()=>{let e=document.querySelectorAll('[name="upload"]');function t(e){e.preventDefault(),e.stopPropagation()}["dragenter","dragleave","dragover","drop"].forEach(l=>{e.forEach(e=>{e.addEventListener(l,t,!1)})}),["dragenter","dragover"].forEach(t=>{e.forEach(e=>{e.addEventListener(t,()=>(function(e){e.closest(".file_upload").style.border="5px solid yellow",e.closest(".file_upload").style.backgroundColor="rgba(0,0,0, .7)"})(e),!1)})}),["dragleave","drop"].forEach(t=>{e.forEach(e=>{e.addEventListener(t,()=>(function(e){e.closest(".file_upload").style.border="none",e.closest(".calc_form")?e.closest(".file_upload").style.backgroundColor="#fff":e.closest(".file_upload").style.backgroundColor="#ededed"})(e),!1)})}),e.forEach(e=>{e.addEventListener("drop",t=>{let l;e.files=t.dataTransfer.files;let n=e.files[0].name.split(".");l=n[0].length>6?"...":".";let o=n[0].substring(0,6)+l+n[1];e.previousElementSibling.textContent=o})})},q=e=>{let t=document.querySelectorAll(e);t.forEach(e=>{e.addEventListener("keypress",e=>{e.key.match(/[^а-яё 0-9]/gi)&&e.preventDefault()})})};window.addEventListener("DOMContentLoaded",function(){"use strict";a(),r(".main-slider-item",1,"vertical"),r(".feedback-slider-item",1,"horizontal",".main-prev-btn",".main-next-btn"),p(),y("[name='phone']"),q("[name='name']"),q("[name='message']"),f(".button.button-transparent.button-styles","#styles .row"),c("server/db.json").then(e=>{let{sizePrice:t,materialPrice:l,optionsPrice:n}=e;h("#size","#material","#options",".promocode",".calc-price",t,l,n)}).catch(e=>console.log(e)),v(),g(".sizes-block"),E(".accordion-heading",".accordion-block"),L(".burger",".burger-menu"),S(".pageup"),b()});
//# sourceMappingURL=index.2316ab79.js.map
